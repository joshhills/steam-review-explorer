"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[572],{84427:function(e,t,r){var n=r(47568),a=r(70655),i=r(26285),s=["operation"];function o(e){var t=new i.ZP(e);return t.version(1).stores({reviews:"recommendationid, timestamp_created, timestamp_updated, language, author_playtime_at_review, author_playtime_forever, author_playtime_last_two_weeks, author_playtime_after_review_time, author_num_reviews, author_num_games_owned, votes_up, votes_funny, comment_count, length"}),t.reviews}function u(){var e=new i.ZP("operation");return e.version(1).stores({operations:"appid"}),e.operations}function l(){return(l=(0,n.Z)((function(){var e,t,r,n,u,l,c,h,m;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,i.ZP.getDatabaseNames()];case 1:e=a.sent().filter((function(e){return-1===s.indexOf(e)})),t={},r=!0,n=!1,u=void 0,a.label=2;case 2:a.trys.push([2,7,8,9]),l=e[Symbol.iterator](),a.label=3;case 3:return(r=(c=l.next()).done)?[3,6]:[4,o(h=c.value).count()];case 4:t[h]=a.sent(),a.label=5;case 5:return r=!0,[3,3];case 6:return[3,9];case 7:return m=a.sent(),n=!0,u=m,[3,9];case 8:try{r||null==l.return||l.return()}finally{if(n)throw u}return[7];case 9:return[2,t]}}))}))).apply(this,arguments)}function c(){return(c=(0,n.Z)((function(e){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,i.ZP.delete(e)];case 1:return t.sent(),[4,u().delete(e)];case 2:return t.sent(),[2]}}))}))).apply(this,arguments)}t.Z={logSearch:function(e,t,r){return u().put({appid:e,start:t.getTime(),end:r.getTime(),when:Date.now()})},getSearch:function(e){return u().get(e.toString())},getStorageQuota:function(){if(navigator.storage&&navigator.storage.estimate)return navigator.storage.estimate();throw new Error("StorageManager not found")},getReviewStoreForGame:o,listReviewsInDatabase:function(){return l.apply(this,arguments)},deleteGame:function(e){return c.apply(this,arguments)}}},27404:function(e,t){t.Z={arabic:{englishName:"Arabic"},bulgarian:{englishName:"Bulgarian"},schinese:{englishName:"Simplified Chinese"},tchinese:{englishName:"Traditional Chinese"},czech:{englishName:"Czech"},danish:{englishName:"Danish"},dutch:{englishName:"Dutch"},english:{englishName:"English"},finnish:{englishName:"Finnish"},french:{englishName:"French"},german:{englishName:"German"},greek:{englishName:"Greek"},hungarian:{englishName:"Hungarian"},indonesian:{englishName:"Indonesian"},italian:{englishName:"Italian"},japanese:{englishName:"Japanese"},koreana:{englishName:"Korean"},norwegian:{englishName:"Norwegian"},polish:{englishName:"Polish"},portuguese:{englishName:"Portuguese"},brazilian:{englishName:"Portuguese - Brazil"},romanian:{englishName:"Romanian"},russian:{englishName:"Russian"},spanish:{englishName:"Spanish - Spain"},latam:{englishName:"Spanish - Latin America"},swedish:{englishName:"Swedish"},thai:{englishName:"Thai"},turkish:{englishName:"Turkish"},ukrainian:{englishName:"Ukrainian"},vietnamese:{englishName:"Vietnamese"}}},76572:function(e,t,r){var n=r(47568),a=r(26042),i=r(69396),s=r(70655),o=r(96486),u=r.n(o),l=r(26209),c=r(25632),h=r(27404),m=r(26285),f=r(84427),_=new c.CensorSensor,p=9999999,g="https://joshhills.dev/cors/",d=new RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");function y(e){var t=!0,r=!1,n=void 0;try{for(var a,i=e.split(/\s/)[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value;if(d.test(s))return!0}}catch(o){r=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}return!1}function v(e){return w.apply(this,arguments)}function w(){return w=(0,n.Z)((function(e){var t,r,n=arguments;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return t=n.length>1&&void 0!==n[1]?n[1]:[],r="all",1===t.length&&(r=t[0]),[4,fetch("".concat(g,"store.steampowered.com/appreviews/").concat(e,"?json=1&day_range=9223372036854775807&language=").concat(r,"&review_type=all&purchase_type=all&filter_offtopic_activity=0&num_per_page=0&cacheBust=").concat(Math.random())).then((function(e){return e.json()})).then((function(e){return{review_score:e.query_summary.review_score,review_score_desc:"1 user reviews"===e.query_summary.review_score_desc?"1 user review":e.query_summary.review_score_desc,total_positive:e.query_summary.total_positive,total_negative:e.query_summary.total_negative,total_reviews:e.query_summary.total_reviews}}))];case 1:return[2,a.sent()]}}))})),w.apply(this,arguments)}function b(){return(b=(0,n.Z)((function(){var e,t,r,n,o,l,c,h,m;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return[4,fetch("".concat(g,"store.steampowered.com/api/featured?cacheBust=").concat(Math.random())).then((function(e){return e.json()})).then((function(e){return e.featured_win}))];case 1:e=s.sent(),t=[],r=!0,n=!1,o=void 0,s.label=2;case 2:s.trys.push([2,7,8,9]),l=u().uniqBy(e,(function(e){return e.id}))[Symbol.iterator](),s.label=3;case 3:return(r=(c=l.next()).done)?[3,6]:[4,k(c.value.id)];case 4:if(null===(h=s.sent()))return[3,5];-1!==h.content_descriptors.ids.indexOf(3)||t.push((0,i.Z)((0,a.Z)({},h),{time_scraped:Math.floor((new Date).getTime()/1e3)})),s.label=5;case 5:return r=!0,[3,3];case 6:return[3,9];case 7:return m=s.sent(),n=!0,o=m,[3,9];case 8:try{r||null==l.return||l.return()}finally{if(n)throw o}return[7];case 9:return[2,t]}}))}))).apply(this,arguments)}function N(){return(N=(0,n.Z)((function(e,t){var r,n,o,u,l,c,h,m,f,_,p;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return[4,fetch("".concat(g,"store.steampowered.com/api/storesearch/?term=").concat(e,"&l=english&cc=US")).then((function(e){return e.json()})).then((function(e){return e.items}))];case 1:r=s.sent(),n=[],o=!0,u=!1,l=void 0,s.label=2;case 2:s.trys.push([2,7,8,9]),c=r[Symbol.iterator](),s.label=3;case 3:return(o=(h=c.next()).done)?[3,6]:[4,k(h.value.id)];case 4:if(null===(m=s.sent()))return[3,5];f=-1!==m.content_descriptors.ids.indexOf(3),_=-1!==t.indexOf("adult_game");try{(_&&"game"===m.type&&f||-1!==t.indexOf(m.type)&&!m.release_date.coming_soon)&&n.push((0,i.Z)((0,a.Z)({},m),{time_scraped:Math.floor((new Date).getTime()/1e3)}))}catch(d){}s.label=5;case 5:return o=!0,[3,3];case 6:return[3,9];case 7:return p=s.sent(),u=!0,l=p,[3,9];case 8:try{o||null==c.return||c.return()}finally{if(u)throw l}return[7];case 9:return[2,n]}}))}))).apply(this,arguments)}function Z(e){var t=/^[^<]*/,r=e.split(",").map((function(e){return e.trim()})).map((function(e){return e.match(t)[0]})),n={},a=!0,i=!1,s=void 0;try{for(var o,u=r[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var l=o.value;for(var c in h.Z)l===h.Z[c].englishName&&(n[c]={englishName:l})}}catch(m){i=!0,s=m}finally{try{a||null==u.return||u.return()}finally{if(i)throw s}}return n}function S(e){var t={},r=!0,n=!1,a=void 0;try{for(var i,s=Object.keys(h.Z)[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var o=i.value;-1===Object.keys(e).indexOf(o)&&(t[o]=h.Z[o])}}catch(u){n=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(n)throw a}}return t}function k(e){return x.apply(this,arguments)}function x(){return x=(0,n.Z)((function(e){var t,r,n,o,u,l=arguments;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:[],[4,fetch("".concat(g,"store.steampowered.com/api/appdetails?appids=").concat(e)).then((function(e){return e.json()})).then((function(t){return t[e].success?t[e].data:null}))];case 1:return null===(r=s.sent())?[2,null]:(n={},r.supported_languages&&(n=Z(r.supported_languages)),o=S(n),[4,v(e,t)]);case 2:return u=s.sent(),[2,(0,i.Z)((0,a.Z)((0,i.Z)((0,a.Z)({},r),{parsed_supported_languages:n,unsupported_languages:o}),u),{time_scraped:Math.floor((new Date).getTime()/1e3)})]}}))})),x.apply(this,arguments)}function T(){return T=(0,n.Z)((function(e,t,r,a,i,o,u,c){var h,d,v,w,b,N,Z,S,k,x,T,j,q,C,R,D,P,O,z,B,G,M,E,F,I,L,A,U,H,J,K,Q,V;return(0,s.__generator)(this,(function($){switch($.label){case 0:return[4,(h=f.Z.getReviewStoreForGame(t)).clear()];case 1:return $.sent(),[4,f.Z.logSearch(t,o,u)];case 2:$.sent(),50,d=null,v=0,w=function(){var t=(0,n.Z)((function(t,r,o){var u,c,h;return(0,s.__generator)(this,(function(m){switch(m.label){case 0:o&&(o=encodeURIComponent(o)),u=null,o||(u=Math.random()),c="all",1===r.length&&(c=r[0]),h="".concat(g,"store.steampowered.com/appreviews/").concat(t,"?json=1&filter=recent&language=").concat(c,"&review_type=all&purchase_type=all&num_per_page=100&filter_offtopic_activity=0").concat(o?"&cursor=".concat(o):"").concat(u?"&cacheBust=".concat(u):""),m.label=1;case 1:return m.trys.push([1,3,,4]),[4,(0,l.Z)((function(){return fetch(h).then(function(){var t=(0,n.Z)((function(t){var r;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.json()];case 1:if(null!==(r=n.sent())&&r.success&&r.query_summary.num_reviews>0)return a({abortController:i}),[2,{reviews:r.reviews,cursor:r.cursor,bytes:+t.headers.get("Content-Length")}];if(a({abortController:i}),0===r.query_summary.num_reviews&&e.total_reviews-v>50)throw new Error("Expected more reviews but response was empty");return[2]}}))}));return function(e){return t.apply(this,arguments)}}())}),{retries:4,signal:i.signal,onFailedAttempt:function(r){u=Math.random(),h="".concat(g,"store.steampowered.com/appreviews/").concat(t,"?json=1&filter=recent&language=").concat(c,"&review_type=all&purchase_type=all&num_per_page=100&filter_offtopic_activity=0").concat(o?"&cursor=".concat(o):"").concat(u?"&cacheBust=".concat(u):""),a({triesLeft:r.retriesLeft,attemptNumber:r.attemptNumber,goal:e.total_reviews,abortController:i})}})];case 2:return[2,m.sent()];case 3:return m.sent(),[2];case 4:return[2]}}))}));return function(e,r,n){return t.apply(this,arguments)}}(),b=[],N=0,Z=!1,$.label=3;case 3:return S=(new Date).getTime(),[4,w(t,c,d)];case 4:if(k=$.sent(),x=(new Date).getTime()-S,3===b.length&&b.shift(),b.push(x),!k)return[3,6];N+=k.bytes,T=!0,j=!1,q=void 0;try{for(C=k.reviews[Symbol.iterator]();!(T=(R=C.next()).done);T=!0)if(D=R.value,v++,!(c.length>0&&-1===c.indexOf(D.language))&&!((P=1e3*D.timestamp_created)>u.getTime())){if(P<o.getTime()){Z=!0;break}D.author_steamid=D.author.steamid,D.author_num_games_owned=D.author.num_games_owned,D.author_num_reviews=D.author.num_reviews,D.author_playtime_forever=D.author.playtime_forever,D.author_playtime_last_two_weeks=D.author.playtime_last_two_weeks,D.author_playtime_at_review=D.author.playtime_at_review,D.author_last_played=D.author.last_played,delete D.author,isNaN(D.author_playtime_at_review)&&(D.author_playtime_at_review=D.author_playtime_forever),D.review=D.review.replace(/"/g,"'"),_.isProfaneIsh(D.review)&&(D.censored=_.cleanProfanityIsh(D.review)),D.recommendationurl="https://steamcommunity.com/profiles/".concat(D.author_steamid,"/recommended/").concat(e.steam_appid,"/"),(D.votes_up>p||D.votes_up<0)&&(D.votes_up=0),(D.votes_funny>p||D.votes_funny<0)&&(D.votes_funny=0),D.contains_url=y(D.review),D.author_playtime_forever>D.author_playtime_at_review?(D.author_continued_playing=!0,D.author_playtime_after_review_time=D.author_playtime_forever-D.author_playtime_at_review):(D.author_continued_playing=!1,D.author_playtime_after_review_time=0),D.length=D.review.length,h.add(D)}}catch(W){j=!0,q=W}finally{try{T||null==C.return||C.return()}finally{if(j)throw q}}O=0,z=!0,B=!1,G=void 0;try{for(M=b[Symbol.iterator]();!(z=(E=M.next()).done);z=!0)F=E.value,O+=F}catch(W){B=!0,G=W}finally{try{z||null==M.return||M.return()}finally{if(B)throw G}}return[4,h.count()];case 5:return I=$.sent(),r({checked:v,count:I,averageRequestTime:O/b.length,bytes:N,finished:!1}),d=k.cursor,[3,7];case 6:d=null,$.label=7;case 7:if(Z)return[3,9];$.label=8;case 8:if(d)return[3,3];$.label=9;case 9:L=0,A=!0,U=!1,H=void 0;try{for(J=b[Symbol.iterator]();!(A=(K=J.next()).done);A=!0)Q=K.value,L+=Q}catch(W){U=!0,H=W}finally{try{A||null==J.return||J.return()}finally{if(U)throw H}}return[4,h.count()];case 10:return V=$.sent(),r({checked:v,count:V,averageRequestTime:L/b.length,bytes:N,finished:!0}),0!==V?[3,12]:[4,m.ZP.delete(t)];case 11:$.sent(),$.label=12;case 12:return[2,V]}}))})),T.apply(this,arguments)}var j={getFeaturedGames:function(){return b.apply(this,arguments)},getReviewScore:v,findGamesBySearchTerm:function(e,t){return N.apply(this,arguments)},getGame:k,getReviews:function(e,t,r,n,a,i,s,o){return T.apply(this,arguments)}};t.Z=j}}]);